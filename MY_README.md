# my_aider

Это форк проекта Aider с пользовательскими модификациями.

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/VitalyKuzmin/my_aider.git
    cd my_aider
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    *   **macOS/Linux:**
        ```bash
        python3 -m venv venv
        source venv/bin/activate
        ```
    *   **Windows:**
        ```bash
        python -m venv venv
        .\venv\Scripts\activate
        ```
    *(Используйте `python` или `python3` в зависимости от вашей системы)*

3.  **Установите пакет в режиме редактирования:**
    Этот шаг установит все необходимые зависимости (указанные в `pyproject.toml` или `setup.py`, которые должны включать `requirements.txt`) и сделает команду `aider` доступной *внутри активированного виртуального окружения*.
    ```bash
    pip install -e .
    ```
    *(Возможно, потребуется `pip3` вместо `pip`)*
    После этого шага вы можете запускать `aider` из командной строки, пока активно ваше виртуальное окружение (`source venv/bin/activate`).

## Глобальная установка с помощью pipx (Рекомендуется)

`pipx` — это инструмент для установки и запуска Python-приложений в изолированных окружениях. Это рекомендуемый способ сделать `my_aider` доступным глобально без конфликтов с другими пакетами.

1.  **Установите pipx** (если он еще не установлен):
    Следуйте [официальной инструкции по установке pipx](https://pipx.pypa.io/stable/installation/). Обычно это делается командой:
    ```bash
    python3 -m pip install --user pipx
    python3 -m pipx ensurepath
    ```
    *(Возможно, потребуется перезапустить терминал после `ensurepath`)*

2.  **Установите `my_aider` с помощью pipx напрямую из GitHub:**
    Эта команда установит последнюю версию из ветки `main` вашего репозитория `origin`. `pipx` автоматически создаст изолированное окружение и добавит `aider` (или `my_aider`, если вы переименуете точку входа в `pyproject.toml`) в ваш PATH.
    ```bash
    pipx install git+https://github.com/VitalyKuzmin/my_aider.git
    ```
    *(Примечание: Имя исполняемого файла будет `aider`, если оно не изменено в `pyproject.toml` проекта)*. Если вы хотите использовать имя `my_aider`, вам может потребоваться либо переименовать точку входа в `pyproject.toml` перед установкой, либо использовать `pipx install --suffix=@my ...` (проверьте документацию `pipx` для точного синтаксиса суффиксов), либо создать псевдоним (`alias my_aider='aider'`) в конфигурации вашей оболочки.

3.  **Обновление:**
    Для обновления до последней версии из репозитория:
    ```bash
    pipx upgrade aider
    ```
    *(Или `pipx upgrade my_aider`, если вы изменили имя)*

4.  **Удаление:**
    ```bash
    pipx uninstall aider
    ```
    *(Или `pipx uninstall my_aider`)*

## Создание глобального доступа вручную (Альтернативный метод, macOS/Linux)

Если вы хотите запускать вашу модифицированную версию `aider` из любого места без необходимости каждый раз активировать виртуальное окружение (`source .venv/bin/activate`), вы можете создать символическую ссылку на исполняемый файл `aider` (который находится внутри вашего `.venv`) из директории, которая уже есть в вашем системном `PATH`. Стандартное место для пользовательских скриптов в macOS - это `/usr/local/bin`.

1.  **Убедитесь, что `/usr/local/bin` существует и находится в вашем `PATH`:**
    *   Проверить `PATH`: `echo $PATH`
    *   Если `/usr/local/bin` нет, его может потребоваться создать (`sudo mkdir -p /usr/local/bin`) и добавить в `PATH` (обычно через конфигурационные файлы вашей оболочки, например, `~/.zshrc` или `~/.bash_profile`).

2.  **Создайте символическую ссылку:**
    Выполните эту команду из корневой директории вашего проекта `my_aider` (где находится папка `.venv`):
    ```bash
    ln -s "$(pwd)/.venv/bin/aider" /usr/local/bin/my_aider
    ```
    *   `"$(pwd)/.venv/bin/aider"`: Получает полный путь к исполняемому файлу `aider` внутри вашего виртуального окружения.
    *   `/usr/local/bin/my_aider`: Создает ссылку с именем `my_aider` в `/usr/local/bin`. Вы можете выбрать другое имя, если хотите.

Теперь вы должны иметь возможность вызывать `my_aider` из любого терминала.

**Примечание:** Если оригинальный `aider` также установлен (например, через `pip install aider`), использование имени `my_aider` для ссылки поможет избежать конфликтов и позволит вам вызывать обе версии: `aider` (оригинал) и `my_aider` (ваша версия).

*   **Windows:**
    В Windows создание символических ссылок таким образом менее распространено. Вместо этого рекомендуется добавить директорию со скриптами вашего виртуального окружения (`.venv\Scripts`) в системную переменную `PATH`.

    1.  **Найдите путь к директории `Scripts`:** В корне вашего проекта `my_aider` это будет путь вроде `C:\путь\к\вашему\проекту\my_aider\.venv\Scripts`. Скопируйте этот полный путь.
    2.  **Добавьте путь в `PATH`:**
        *   Нажмите `Win + R`, введите `sysdm.cpl` и нажмите Enter.
        *   Перейдите на вкладку "Дополнительно" и нажмите кнопку "Переменные среды...".
        *   В разделе "Системные переменные" (или "Переменные среды пользователя", если вы хотите установить только для себя) найдите переменную `Path` и нажмите "Изменить...".
        *   Нажмите "Создать" и вставьте скопированный путь к директории `.venv\Scripts`.
        *   Нажмите "ОК" во всех открытых окнах.
    3.  **Перезапустите терминал:** Откройте новое окно командной строки или PowerShell. Теперь вы должны иметь возможность вызывать `aider` (или `my_aider`, если вы переименовали точку входа) из любого места.

## Получение обновлений из оригинального Aider (upstream)

Ваш репозиторий (`origin`) связан с оригинальным репозиторием Aider (`upstream`), что позволяет вам получать последние обновления из него.

1.  **Загрузите последние изменения из `upstream`:**
    Эта команда скачивает все новые коммиты и ветки из оригинального репозитория, но не применяет их к вашей локальной ветке.
    ```bash
    git fetch upstream
    ```

2.  **Слейте изменения в вашу локальную ветку:**
    Переключитесь на вашу основную ветку (обычно `main`) и примените скачанные изменения из главной ветки `upstream` (обычно `main` или `master`).
    ```bash
    git checkout main
    git merge upstream/main
    ```
    *(Замените `upstream/main` на `upstream/master`, если главная ветка в оригинальном репозитории называется `master`)*

    **Внимание:** Во время слияния могут возникнуть *конфликты*, если вы изменяли те же части кода, что и в оригинальном репозитории. Git сообщит об этом, и вам нужно будет вручную разрешить конфликты в файлах, а затем завершить слияние (`git add <файлы_с_конфликтами>` и `git commit`).

3.  **Альтернативный способ (fetch + merge):**
    Команда `pull` объединяет шаги 1 и 2:
    ```bash
    git checkout main
    git pull upstream main
    ```
    *(Опять же, замените `main` на `master` при необходимости)*

После выполнения этих шагов ваша локальная ветка `main` будет содержать как ваши собственные изменения, так и последние обновления из оригинального репозитория Aider. Не забудьте отправить обновленную ветку в ваш репозиторий `origin`:
```bash
git push origin main
```
